<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Moueene - Connect with trusted service providers for all your needs"
    />
    <title>Moueene - Home Services Platform</title>
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="smooth-scroll">
    <!-- Header -->
    <header class="header glass-header" id="header">
      <div class="container">
        <nav class="navbar">
          <a href="index.html" class="logo">
            <img src="assets/images/logo.webp" alt="Moueene Logo" />
            <span>Moueene</span>
          </a>
          <ul class="nav-menu">
            <li><a href="index.html" class="active">Home</a></li>
            <li><a href="pages/services.html">Services</a></li>
            <li><a href="pages/providers.html">Providers</a></li>
            <li><a href="pages/how-it-works.html">How It Works</a></li>
            <li><a href="pages/about.html">About Us</a></li>
            <li><a href="pages/contact.html">Contact</a></li>
          </ul>
          <div class="nav-buttons">
            <a href="pages/login.html" class="btn btn-glass">Login</a>
            <a href="pages/register.html" class="btn btn-primary pulse-btn"
              >Sign Up</a
            >
          </div>
          <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </nav>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-bg-parallax"></div>
      <div class="container relative z-10">
        <div class="hero-banner" data-aos="zoom-in" data-aos-duration="1000">
          <div class="hero-content">
            <h1 data-aos="fade-up" data-aos-delay="200">WELCOME TO MOUEENE</h1>
            <p data-aos="fade-up" data-aos-delay="400">
              Your one-stop solution for all home service needs, connecting you
              with trusted professionals for cleaning, gardening, nursing, and
              more.
            </p>

            <div
              class="hero-search-wrapper"
              data-aos="fade-up"
              data-aos-delay="600"
            >
              <form
                action="pages/services.html"
                method="GET"
                class="hero-search-form glass-effect"
              >
                <input
                  type="text"
                  name="q"
                  placeholder="What service do you need today?"
                />
                <button type="submit"><i class="fas fa-search"></i></button>
              </form>
            </div>

            <div
              class="hero-cta-buttons"
              data-aos="fade-up"
              data-aos-delay="800"
            >
              <a href="pages/services.html" class="btn btn-primary glow-effect"
                >Book Now</a
              >
              <a
                href="pages/register.html?type=provider"
                class="btn btn-white hover-slide"
                >Become a Service Provider</a
              >
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Categories Section -->
    <section class="categories">
      <div class="container-fluid">
        <div class="section-header" data-aos="fade-down">
          <h2>Discover Popular Categories</h2>
          <p>Browse through our most requested service categories</p>
        </div>

        <!-- Orbital Categories Layout -->
        <div class="categories-orbital">
          <div
            class="categories-image"
          >
            <img
              src="/assets/categories-transparent.png"
              alt=""
              onerror="this.onerror=null; this.src='assets/categories-transparent.png';"
            />
          </div>

          <!-- Floating Category Items -->
          <a
            href="pages/services.html?category=childcare"
            class="orbital-item orbital-1"
          >
            <div class="orbital-icon"><i class="fas fa-baby-carriage"></i></div>
            <span>Childcare</span>
          </a>
          <a
            href="pages/services.html?category=tutoring"
            class="orbital-item orbital-2"
          >
            <div class="orbital-icon"><i class="fas fa-book-reader"></i></div>
            <span>Tutoring</span>
          </a>
          <a
            href="pages/services.html?category=cleaning"
            class="orbital-item orbital-3"
          >
            <div class="orbital-icon"><i class="fas fa-broom"></i></div>
            <span>Cleaning</span>
          </a>
          <a
            href="pages/services.html?category=gardening"
            class="orbital-item orbital-4"
          >
            <div class="orbital-icon"><i class="fas fa-leaf"></i></div>
            <span>Gardening</span>
          </a>
          <a
            href="pages/services.html?category=petcare"
            class="orbital-item orbital-5"
          >
            <div class="orbital-icon"><i class="fas fa-paw"></i></div>
            <span>Pet Care</span>
          </a>
          <a
            href="pages/services.html?category=elderly"
            class="orbital-item orbital-6"
          >
            <div class="orbital-icon"><i class="fas fa-wheelchair"></i></div>
            <span>Elderly Care</span>
          </a>
          <a
            href="pages/services.html?category=repairs"
            class="orbital-item orbital-7"
          >
            <div class="orbital-icon"><i class="fas fa-tools"></i></div>
            <span>Repairs</span>
          </a>
        </div>
      </div>

      <!-- Bottom Curve - White wave cutting into Categories -->
      <div class="categories-curve">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 1200 120"
          preserveAspectRatio="none"
        >
          <path
            d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V120H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"
            class="shape-fill"
          ></path>
        </svg>
      </div>
    </section>

    <!-- How It Works Section -->
    <section class="how-it-works">
      <div class="container relative z-10">
        <div class="section-header" data-aos="fade-up">
          <h2>How It Works</h2>
          <p>Getting started with Moueene is easy</p>
        </div>
        <div class="steps-container">
          <div class="step step-down" data-aos="fade-up" data-aos-delay="100">
            <div class="step-number">1</div>
            <div class="step-icon">
              <i class="fas fa-search"></i>
            </div>
            <h3>Choose Service</h3>
            <p>Browse through our categories and find the service you need</p>
          </div>
          <div class="step-connector-curve"></div>
          <div class="step step-up" data-aos="fade-up" data-aos-delay="300">
            <div class="step-number">2</div>
            <div class="step-icon">
              <i class="fas fa-user-check"></i>
            </div>
            <h3>Find Provider</h3>
            <p>
              Compare profiles, reviews, and rates to find your perfect match
            </p>
          </div>
          <div class="step-connector-curve"></div>
          <div class="step step-down" data-aos="fade-up" data-aos-delay="500">
            <div class="step-number">3</div>
            <div class="step-icon">
              <i class="fas fa-calendar-check"></i>
            </div>
            <h3>Book</h3>
            <p>Schedule your service at a time that works best for you</p>
          </div>
          <div class="step-connector-curve"></div>
          <div class="step step-up" data-aos="fade-up" data-aos-delay="700">
            <div class="step-number">4</div>
            <div class="step-icon">
              <i class="fas fa-star"></i>
            </div>
            <h3>Evaluation</h3>
            <p>Rate your experience and help others find great service</p>
          </div>
        </div>
      </div>

      <!-- Bottom Curve -->
      <div class="custom-shape-divider-bottom-1689366681">
        <svg
          data-name="Layer 1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 1200 120"
          preserveAspectRatio="none"
        >
          <path
            d="M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z"
            class="shape-fill"
          ></path>
        </svg>
      </div>
    </section>

    <!-- Featured Services Section -->
    <section class="featured-providers">
      <div class="container">
        <div class="section-header" data-aos="fade-up">
          <h2>Top Services</h2>
          <p>Explore our most booked services right now</p>
        </div>
        <div id="top-services-grid" class="services-grid"></div>
        <div
          id="top-services-status"
          class="text-center"
          style="margin-top: 1rem"
        ></div>
        <div class="text-center mt-40" data-aos="fade-up">
          <a href="pages/services.html" class="btn btn-primary pulse-btn"
            >Browse All Services</a
          >
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta" data-aos="zoom-in">
      <div class="container">
        <div class="cta-content glass-panel">
          <h2>Ready to Get Started?</h2>
          <p>
            Join thousands of satisfied customers and trusted service providers
            on Moueene
          </p>
          <div class="cta-buttons">
            <a href="pages/register.html" class="btn btn-white glow-effect"
              >Sign Up Now</a
            >
            <a href="pages/contact.html" class="btn btn-outline-white"
              >Contact Us</a
            >
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-grid">
          <div class="footer-about">
            <a href="index.html" class="footer-logo">
              <div
                style="
                  font-size: 24px;
                  font-weight: 800;
                  color: var(--primary-color);
                "
              >
                MOUEENE
              </div>
            </a>
            <p>
              Moueene connects customers with trusted service providers for all
              their home and personal needs.
            </p>
            <div class="social-links">
              <a href="#" class="social-icon"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
              <a href="#" class="social-icon"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="#" class="social-icon"
                ><i class="fab fa-linkedin-in"></i
              ></a>
            </div>
          </div>
          <div class="footer-links">
            <h4>Quick Links</h4>
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="pages/services.html">Services</a></li>
              <li><a href="pages/providers.html">Find Providers</a></li>
              <li><a href="pages/how-it-works.html">How It Works</a></li>
              <li><a href="pages/about.html">About Us</a></li>
            </ul>
          </div>
          <div class="footer-links">
            <h4>Services</h4>
            <ul>
              <li>
                <a href="pages/services.html?category=childcare">Childcare</a>
              </li>
              <li>
                <a href="pages/services.html?category=tutoring">Tutoring</a>
              </li>
              <li>
                <a href="pages/services.html?category=cleaning">Cleaning</a>
              </li>
              <li>
                <a href="pages/services.html?category=gardening">Gardening</a>
              </li>
              <li>
                <a href="pages/services.html?category=petcare">Pet Care</a>
              </li>
            </ul>
          </div>
          <div class="footer-links">
            <h4>Support</h4>
            <ul>
              <li><a href="pages/contact.html">Contact Us</a></li>
              <li><a href="pages/faq.html">FAQ</a></li>
              <li><a href="pages/privacy.html">Privacy Policy</a></li>
              <li><a href="pages/terms.html">Terms of Service</a></li>
              <li><a href="pages/help.html">Help Center</a></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2026 Moueene. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
      // Initialize AOS for this page
      document.addEventListener("DOMContentLoaded", function () {
        AOS.init({
          duration: 800,
          easing: "ease-out-cubic",
          once: true,
        });

        const API_BASE = "/backend/api/v1";
        const topGrid = document.getElementById("top-services-grid");
        const topStatus = document.getElementById("top-services-status");

        function escapeHtml(text) {
          return String(text ?? "")
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/\"/g, "&quot;")
            .replace(/'/g, "&#039;");
        }

        function getCategoryFallbackImage(categoryId) {
          const index = ((Number(categoryId || 1) - 1) % 6) + 1;
          return `assets/images/categories/category${index}.jpg`;
        }

        function resolveImageUrl(rawUrl) {
          const value = String(rawUrl || "").trim();
          if (!value) return "";
          if (/^https?:\/\//i.test(value)) return value;
          if (value.startsWith("/")) return value;
          // index.html is at site root; relative paths can be used as-is.
          return value.replace(/^\.\//, "");
        }

        function formatPrice(basePrice, priceType) {
          const price = Number(basePrice || 0);
          const formatted = `$${price.toFixed(2).replace(/\.00$/, "")}`;
          if (priceType === "hourly") return `${formatted}/hr`;
          if (priceType === "per_item") return `${formatted}/item`;
          return formatted;
        }

        async function apiGet(path, params = {}) {
          const url = new URL(API_BASE + path, window.location.origin);
          Object.entries(params).forEach(([key, value]) => {
            if (value === null || value === undefined || value === "") return;
            url.searchParams.set(key, value);
          });
          const response = await fetch(url);
          const json = await response.json().catch(() => null);
          if (!response.ok || !json || json.success !== true) {
            const message =
              json?.message || `Request failed (${response.status})`;
            throw new Error(message);
          }
          return json;
        }

        function renderTopServices(services) {
          if (!topGrid) return;
          topGrid.innerHTML = "";

          const fragment = document.createDocumentFragment();
          services.forEach((service, index) => {
            const card = document.createElement("div");
            card.className = "service-card";
            card.setAttribute("data-aos", "fade-up");
            card.setAttribute(
              "data-aos-delay",
              String((index % 4) * 100 + 100),
            );

            const imageUrl = service.service_image
              ? resolveImageUrl(service.service_image)
              : getCategoryFallbackImage(service.category_id);

            const categoryName = service.category_name || "Service";
            const rating = Number(service.average_rating || 0).toFixed(1);
            const bookings = Number(service.total_bookings || 0);
            const priceText = formatPrice(
              service.base_price,
              service.price_type,
            );

            const href = `pages/service-detail.html?service_id=${encodeURIComponent(service.service_id)}`;

            card.innerHTML = `
              <div class="service-image-container">
                <img
                  src="${escapeHtml(imageUrl)}"
                  alt="${escapeHtml(service.service_name)}"
                  class="service-img"
                  onerror="this.src='${escapeHtml(getCategoryFallbackImage(service.category_id))}'"
                />
                <div class="service-overlay">
                  <a href="${escapeHtml(href)}" class="btn btn-white btn-sm">Quick View</a>
                </div>
              </div>
              <div class="service-content">
                <span class="service-category">${escapeHtml(categoryName)}</span>
                <h3>${escapeHtml(service.service_name)}</h3>
                <p>${escapeHtml(service.description || "")}</p>
                <div class="service-meta">
                  <div class="service-rating">
                    <i class="fas fa-star"></i>
                    <span>${escapeHtml(rating)} (${escapeHtml(bookings)})</span>
                  </div>
                  <div class="service-price">${escapeHtml(priceText)}</div>
                </div>
              </div>
            `;
            fragment.appendChild(card);
          });

          topGrid.appendChild(fragment);
          if (window.AOS && typeof window.AOS.refreshHard === "function") {
            window.AOS.refreshHard();
          }
        }

        async function initTopServices() {
          if (!topGrid) return;
          try {
            if (topStatus) topStatus.textContent = "Loading top services...";
            const result = await apiGet("/services/popular", { limit: 4 });
            const services = Array.isArray(result.data) ? result.data : [];
            if (services.length === 0) {
              if (topStatus)
                topStatus.textContent = "No services available right now.";
              return;
            }
            renderTopServices(services);
            if (topStatus) topStatus.textContent = "";
          } catch (err) {
            console.error(err);
            if (topStatus)
              topStatus.textContent =
                err?.message || "Failed to load top services";
          }
        }

        initTopServices();
      });
    </script>
  </body>
</html>
